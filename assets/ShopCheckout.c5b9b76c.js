import{q as m,v as x,m as f,d as y,o as s,c as l,a as b,b as t,u as d,F as g,g as k,t as o,f as p}from"./index.036f5c0f.js";import{_ as w}from"./ShopCheckoutStep.e32c7df4.js";const $={class:"container mx-auto flex flex-col gap-4"},N={class:"flex justify-between w-full py-8 px-4"},B=t("h1",{class:"text-4xl font-bold"},"\u78BA\u8A8D\u4ED8\u6B3E",-1),C={class:"btn-group"},D=["disabled"],V={key:0},j={key:1},q={class:"flex gap-4"},A={class:"overflow-x-auto w-full"},F={key:0,class:"table w-full"},O=t("thead",null,[t("tr",null,[t("th",null,"\u54C1\u540D"),t("th",null,"\u6578\u91CF"),t("th",{class:"text-right"},"\u55AE\u50F9")])],-1),P={class:"text-right"},S={class:"text-right text-lg font-bold",colspan:"3"},W={class:"overflow-x-auto w-full max-w-[300px]"},E={class:"table w-full"},I=t("thead",null,[t("tr",null,[t("th",null,"\u8CC7\u8A0A"),t("th",null,"\u5167\u5BB9")])],-1),L={key:0},R=t("th",null,"\u96FB\u5B50\u4FE1\u7BB1",-1),T=t("th",null,"\u59D3\u540D",-1),z=t("th",null,"\u96FB\u8A71",-1),G=t("th",null,"\u5730\u5740",-1),H={class:""},J=t("th",null,"\u4ED8\u6B3E\u72C0\u614B",-1),K={key:0},M={key:1},Y={__name:"ShopCheckout",setup(Q){const i=m("axiosWithAuth"),{orderId:c}=x().params,e=f({}),_=y(()=>{var n,r;return(r=(n=e.value)==null?void 0:n.order)==null?void 0:r.is_paid}),u=f(!1);function h(){i({method:"get",url:`/order/${c}`}).then(n=>{e.value=n.data})}function v(n){u.value=!0,i({method:"post",url:`/pay/${n}`}).then(()=>{u.value=!1,h()})}return h(),(n,r)=>(s(),l("div",$,[b(w,{"current-step":3}),t("div",N,[B,t("div",C,[t("button",{disabled:d(_)||u.value,class:"btn btn-primary",type:"button",onClick:r[0]||(r[0]=a=>v(d(c)))},[u.value?(s(),l("span",V,"\u4ED8\u6B3E\u4E2D\u2026\u2026")):(s(),l("span",j,"\u4ED8\u6B3E"))],8,D)])]),t("div",q,[t("div",A,[e.value.order?(s(),l("table",F,[O,t("tbody",null,[(s(!0),l(g,null,k(e.value.order.products,a=>(s(),l("tr",{key:a.id},[t("td",null,o(a.product.title),1),t("td",null,o(a.qty)+" / "+o(a.product.unit),1),t("td",P,o(a.total),1)]))),128))]),t("tfoot",null,[t("tr",null,[t("td",S,"\u7E3D\u50F9\uFF1A"+o(e.value.order.total)+" $NTD",1)])])])):p("",!0)]),t("div",W,[t("table",E,[I,e.value.order?(s(),l("tbody",L,[t("tr",null,[R,t("td",null,o(e.value.order.user.email),1)]),t("tr",null,[T,t("td",null,o(e.value.order.user.name),1)]),t("tr",null,[z,t("td",null,o(e.value.order.user.tel),1)]),t("tr",null,[G,t("td",null,o(e.value.order.user.address),1)])])):p("",!0),t("tfoot",H,[t("tr",null,[J,t("td",null,[d(_)?(s(),l("span",K,"\u4ED8\u6B3E\u5B8C\u6210")):(s(),l("span",M,"\u5C1A\u672A\u4ED8\u6B3E"))])])])])])])]))}};export{Y as default};
