import{q,x as L,m as k,d as $,o as l,c as n,a as Z,b as t,f as m,u as d,w as A,e as h,F as B,g as E,t as i,h as S,$ as I,r as U}from"./index.58e29e9e.js";import{_ as W}from"./ShopCheckoutStep.a94ea9d8.js";import{_ as F}from"./DashboardDeleteModal.e953f5d8.js";const R={class:"container mx-auto py-16"},z={class:"flex justify-between w-full py-8 px-4"},G=t("h1",{class:"text-4xl font-bold"},"\u7528\u6236\u8CFC\u7269\u8ECA",-1),J={class:"btn-group"},K=["disabled"],O={class:"flex flex-col lg:flex-row gap-4 px-4 mb-8"},P={key:0,class:"w-full h-full bg-base-200 p-8 card flex items-center"},X=t("svg",{class:"mb-4",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",height:"48",width:"48"},[t("path",{d:"M14.35 43.95q-1.5 0-2.55-1.05-1.05-1.05-1.05-2.55 0-1.5 1.05-2.55 1.05-1.05 2.55-1.05 1.5 0 2.55 1.05 1.05 1.05 1.05 2.55 0 1.5-1.05 2.55-1.05 1.05-2.55 1.05Zm20 0q-1.5 0-2.55-1.05-1.05-1.05-1.05-2.55 0-1.5 1.05-2.55 1.05-1.05 2.55-1.05 1.5 0 2.55 1.05 1.05 1.05 1.05 2.55 0 1.5-1.05 2.55-1.05 1.05-2.55 1.05Zm-22.6-33 5.5 11.4h14.4l6.25-11.4Zm-1.5-3H39.7q1.15 0 1.75 1.05.6 1.05 0 2.1L34.7 23.25q-.55.95-1.425 1.525t-1.925.575H16.2l-2.8 5.2h24.55v3h-24.1q-2.1 0-3.025-1.4-.925-1.4.025-3.15l3.2-5.9L6.45 7h-3.9V4H8.4Zm7 14.4h14.4Z"})],-1),Y=t("span",{class:"text-2xl mb-8"}," \u76EE\u524D\u8CFC\u7269\u8ECA\u5167\u7121\u5546\u54C1 ",-1),tt={key:1,class:"overflow-x-auto w-full"},et={key:0,class:"table w-full"},st=t("thead",null,[t("tr",null,[t("th"),t("th",null,"\u5716\u7247"),t("th",null,"\u54C1\u9805"),t("th",null,"\u6578\u91CF"),t("th",{class:"text-right"},"\u55AE\u50F9")])],-1),ot=["onClick"],lt=t("svg",{title:"Trash Can \u522A\u9664",xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},[t("path",{d:"M7 21q-.825 0-1.412-.587Q5 19.825 5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413Q17.825 21 17 21ZM17 6H7v13h10ZM9 17h2V8H9Zm4 0h2V8h-2ZM7 6v13Z"})],-1),nt=[lt],at=["src","alt"],it={class:"input-group"},dt=["value","disabled","onChange"],ut={class:"text-right"},ct={key:0},rt={class:"opacity-40"},ht=t("span",null,"$NTD",-1),_t={class:"text-lg font-bold"},pt=t("span",null,"$NTD",-1),mt={key:1},ft={class:"text-right"},vt={colspan:"5",class:"text-2xl"},bt={key:0},xt={class:"opacity-60 font-normal text-xl"},gt={key:1},wt={key:2,class:"items-center card p-4 bg-base-200 w-full justify-center max-w-auto lg:max-w-[300px]"},yt=t("div",{class:"flex flex-col justify-center items-center"},[t("svg",{class:"transform-gpu rotate-12 mb-4",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",height:"48",width:"48"},[t("path",{d:"m18.8 32.1 5.2-4.05 5.2 4.05-2-6.4 4.9-4.1h-6L24 15.5l-2.1 6.1h-6l4.9 4.1ZM7 40q-1.3 0-2.15-.85Q4 38.3 4 37v-7.65q1.85-.4 3.075-1.875T8.3 24q0-2-1.225-3.5T4 18.65V11q0-1.3.85-2.15Q5.7 8 7 8h34q1.3 0 2.15.85Q44 9.7 44 11v7.65q-1.85.35-3.075 1.85T39.7 24q0 2 1.225 3.475T44 29.35V37q0 1.3-.85 2.15Q42.3 40 41 40Zm0-3h34v-5.45q-1.9-1.3-3.1-3.25-1.2-1.95-1.2-4.3 0-2.35 1.2-4.3 1.2-1.95 3.1-3.25V11H7v5.45q1.95 1.3 3.125 3.25T11.3 24q0 2.35-1.175 4.3Q8.95 30.25 7 31.55Zm17-13Z"})]),t("h2",{class:"font-medium mb-8 text-2xl text-center whitespace-nowrap"},[h("\u4F7F\u7528\u512A\u60E0\u5238"),t("br"),h("\u7372\u5F97\u66F4\u512A\u60E0\u7684\u50F9\u683C\uFF01")])],-1),Ct=t("div",{class:"input-group"},[t("input",{id:"couponCode",class:"input input-bordered w-full",name:"couponCode",type:"text",placeholder:"\u8ACB\u8F38\u5165\u512A\u60E0\u5238\u4EE3\u78BC\u2026\u2026",required:""}),t("button",{class:"btn",type:"submit"},"\u4F7F\u7528\u512A\u60E0")],-1),qt=[Ct],Tt={__name:"ShopCart",setup(kt){const u=q("axiosWithAuth"),V=L(),T=q("$loading"),a=k([]),c=k([]),f=$(()=>a.value.total!==a.value.final_total),_=$(()=>{var e,o;return!((o=(e=a.value)==null?void 0:e.carts)!=null&&o.length)});async function r(){const e=T.show();u({method:"get",url:"/cart"}).then(o=>{a.value=o.data.data}).finally(()=>{e.hide()})}function D(e,o=1){c.value=[...c.value,e],u({method:"put",url:`/cart/${e}`,data:{data:{product_id:"cartId",qty:o}}}).then(()=>{r()}).finally(()=>{c.value=c.value.filter(p=>p!==e)})}function N(e,o=1){D(e,parseInt(o,10))}function H(e){u({method:"delete",url:`/cart/${e}`}).then(()=>{r()})}function M(e){I.show({component:F,bind:{dashboardItem:{title:e.product.title}},on:{confirm(){H(e.id)}},slots:{title:"\u522A\u9664\u7522\u54C1"}})}function Q(){u({method:"delete",url:"/carts"}).then(()=>{r()})}async function j(e){u({method:"post",url:"/coupon",data:{data:{code:e.couponCode.value}}}).then(()=>{r(),e.reset()})}return r(),(e,o)=>{var v,b,x,g;const p=U("router-link");return l(),n("div",R,[Z(W,{"current-step":1}),t("div",z,[G,t("div",J,[(b=(v=a.value)==null?void 0:v.carts)!=null&&b.length?(l(),n("button",{key:0,type:"button",class:"btn btn-outline hover:btn-error",onClick:o[0]||(o[0]=s=>Q())}," \u6E05\u7A7A\u8CFC\u7269\u8ECA ")):m("",!0),t("button",{disabled:d(_),class:"btn btn-primary",type:"button",onClick:o[1]||(o[1]=()=>{d(V).push({name:"cartInfo"})})}," \u586B\u5BEB\u8A02\u55AE\u8CC7\u6599 ",8,K)])]),t("div",O,[d(_)?(l(),n("div",P,[X,Y,Z(p,{class:"btn",to:{name:"products"}},{default:A(()=>[h("\u4F86\u53BB\u901B\u901B")]),_:1})])):(l(),n("div",tt,[(g=(x=a.value)==null?void 0:x.carts)!=null&&g.length?(l(),n("table",et,[st,t("tbody",null,[(l(!0),n(B,null,E(a.value.carts,s=>{var w,y;return l(),n("tr",{key:s.id,class:"hover"},[t("td",null,[t("button",{class:"btn btn-outline btn-square hover:btn-error",onClick:C=>M(s)},nt,8,ot)]),t("td",null,[t("img",{class:"inline-block",width:"150",src:s.product.imageUrl,alt:s.product.title},null,8,at)]),t("td",null,i((w=s.product)!=null&&w.title?s.product.title:"\u7121\u7D00\u9304"),1),t("td",null,[t("label",it,[t("input",{class:"input input-bordered",type:"number",min:"1",value:s.qty,disabled:c.value.includes(s.id),onChange:C=>{N(s.id,C.target.value)}},null,40,dt),t("span",null,i((y=s.product)!=null&&y.unit?s.product.unit:"\u500B"),1)])]),t("td",ut,[d(f)?(l(),n("span",ct,[t("del",rt,[h(i(s.total),1),ht]),t("div",_t,[h(i(s.final_total),1),pt])])):(l(),n("span",mt,i(s.total),1))])])}),128))]),t("tfoot",null,[t("tr",ft,[t("td",vt,[d(f)?(l(),n("div",bt,[t("del",xt,"\u7E3D\u8A08\uFF1A "+i(a.value.total)+" $NTD",1),t("div",null,"\u6298\u6263\u5F8C\u50F9\u683C\uFF1A "+i(a.value.final_total)+" $NTD",1)])):(l(),n("div",gt,"\u7E3D\u8A08\uFF1A "+i(a.value.total)+" $NTD",1))])])])])):m("",!0)])),d(_)?m("",!0):(l(),n("div",wt,[yt,t("form",{class:"w-full flex",onSubmit:o[2]||(o[2]=S(s=>{j(s.target)},["prevent"]))},qt,32)]))])])}}};export{Tt as default};
